{"filter":false,"title":"priorities.js","tooltip":"/server/routes/priorities.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":10,"column":3},"action":"remove","lines":["var express = require(\"express\");","var router  = express.Router();","var Campground = require(\"../models/fypriority\");","var middleware = require(\"../middleware\");","var request = require(\"request\");","","","//root route","router.get(\"/\", function(req, res){","    res.render(\"priorities\");","});"],"id":3},{"start":{"row":0,"column":0},"end":{"row":85,"column":0},"action":"insert","lines":["var express = require(\"express\");","var router  = express.Router();","var FYPriority = require(\"../models/fypriority\");","var middleware = require(\"../middleware\");","var request = require(\"request\");","","","","router.get(\"/\", function(req, res){","    res.redirect(\"/fypriorities\");","});","","router.get(\"/fypriorities\", function(req, res){","    FYPriority.find({}, function(err, fypriorities){","        if(err){","            console.log(err);","        } else {","            res.render(\"index\", {fypriorities: []}); ","        }","    })","});","","router.get(\"/fypriorities/new\", function(req, res){","   res.render(\"new\"); ","});","","router.post(\"/fypriorities\", function(req, res){","    req.body.fypriorities.body = req.sanitize(req.body.fypriorities.body);","   var formData = req.body.fypriorities;","   FYPriority.create(formData, function(err, newFypriorities){","       console.log( newFypriorities);","      if(err){","          res.render(\"new\");","      } else {","          res.redirect(\"/fypriorities\");","      }","   });","});","","router.get(\"/fypriorities/:id\", function(req, res){","   FYPriority.findById(req.params.id, function(err, fypriorities){","      if(err){","          res.redirect(\"/\");","      } else {","          res.render(\"show\", {fypriorities: fypriorities});","      }","   });","});","","router.get(\"/fypriorities/:id/edit\", function(req, res){","   FYPriority.findById(req.params.id, function(err, fypriorities){","       if(err){","           console.log(err);","           res.redirect(\"/\")","       } else {","           res.render(\"edit\", {fypriorities: fypriorities});","       }","   });","});","","router.put(\"/fypriorities/:id\", function(req, res){","   FYPriority.findByIdAndUpdate(req.params.id, req.body.fypriorities, function(err, fypriorities){","       if(err){","           console.log(err);","       } else {","         var showUrl = \"/fypriorities/\" +fypriorities._id;","         res.redirect(showUrl);","       }","   });","});","","router.delete(\"/fypriorities/:id\", function(req, res){","   FYPriority.findById(req.params.id, function(err, fypriorities){","       if(err){","           console.log(err);","       } else {","           fypriorities.remove();","           res.redirect(\"/fypriorities\");","       }","   }); ","});","","","router.listen(process.env.PORT, process.env.IP);","",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":85,"column":0},"end":{"row":85,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1516686996213,"hash":"89a8aad0b0795223ca730b7b244596c7bdd3e6bd"}